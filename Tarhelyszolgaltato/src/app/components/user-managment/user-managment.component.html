<p-toast></p-toast>

<p-table [value]="users" [responsive]="true" [paginator]="true" [rows]="10">
  <ng-template pTemplate="header">
    <tr>
      <th>Név</th>
      <th>Email</th>
      <th>Szerep</th>
      <th>Feliratkozások</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>{{ user.name }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.role }}</td>
      <td>
        <button pButton label="Feliratkozások" icon="pi pi-list" (click)="viewUserDetails(user)"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [(visible)]="displayDialog" [modal]="true" [responsive]="true" [closable]="false">
  <p-header>
    {{ selectedUser?.name }} feliratkozásai
  </p-header>
  <div *ngIf="selectedUser">
    <p-table [value]="subscriptions" [responsive]="true">
      <ng-template pTemplate="header">
        <tr>
          <th>Tároló Név</th>
          <th>Dátum</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-subscription>
        <tr>
          <td>{{ subscription.storageName }}</td>
          <td>{{ subscription.date | date: 'short' }}</td>
        </tr>
      </ng-template>      
    </p-table>
  </div>
  <p-footer>
    <button pButton label="Bezár" icon="pi pi-times" (click)="hideDialog()"></button>
  </p-footer>
</p-dialog>
